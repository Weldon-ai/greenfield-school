<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Admin Exams | SMS</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
        body { font-family: 'Segoe UI', Arial, sans-serif; background-color: #f4f6f9; margin:0; padding:0; color: #333; }
        .container { max-width: 1200px; margin: 30px auto; padding:20px; background: white; border-radius: 8px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }
        h1 { color: #1e3a8a; border-bottom: 2px solid #e5e7eb; padding-bottom: 10px; }
        
        table { width: 100%; border-collapse: collapse; margin-top: 20px; }
        table th, table td { border: 1px solid #e5e7eb; padding: 12px; text-align: center; }
        table th { background-color: #1e3a8a; color: white; font-weight: 600; }
        table tr:nth-child(even) { background-color: #f8fafc; }
        
        .btn { display: inline-block; padding: 8px 14px; border:none; border-radius:5px; cursor:pointer; color:white; text-decoration: none; font-size: 14px; transition: opacity 0.2s; }
        .btn:hover { opacity: 0.85; }
        .btn-create { background-color:#2563eb; margin-bottom: 15px; }
        .btn-upload { background-color:#10b981; }
        .btn-lock { background-color:#f97316; }
        .btn-unlock { background-color:#facc15; color:black; }
        .btn-export { background-color:#9333ea; }
        
        .flex { display:flex; gap:8px; justify-content: center; align-items: center; }
        .status-badge { padding: 4px 8px; border-radius: 4px; font-size: 12px; font-weight: bold; }
        .status-locked { background: #fee2e2; color: #dc2626; }
        .status-open { background: #dcfce7; color: #166534; }
    </style>
</head>
<body>
<div class="container">
    <h1>ðŸ“š Admin Exam Dashboard</h1>

    <div style="display: flex; justify-content: flex-start;">
        <a th:href="@{/admin/exams/create}" class="btn btn-create">+ Create New Exam</a>
    </div>

    <table>
        <thead>
        <tr>
            <th>ID</th>
            <th>Subject</th>
            <th>Term</th>
            <th>Class</th>
            <th>Exam Date</th>
            <th>Results</th>
            <th>Status</th>
            <th>Actions</th>
        </tr>
        </thead>
        <tbody>
        <tr th:each="exam : ${exams}">
            <td th:text="${exam.id}">1</td>
            <td th:text="${exam.subject}">Math</td>
            <td th:text="${exam.term}">Term 1</td>
            
            <td th:text="${exam.classes != null ? exam.classes.displayName : 'N/A'}">Class Name (CODE)</td>
            
            <td th:text="${exam.examDate}">2026-01-30</td>
            <td>
                <a th:href="@{/admin/exams/results/{id}(id=${exam.id})}" class="btn btn-upload">Upload / View</a>
            </td>
            <td>
                <span th:class="${exam.locked ? 'status-badge status-locked' : 'status-badge status-open'}"
                      th:text="${exam.locked ? 'Locked' : 'Open'}">
                </span>
            </td>
            <td>
                <div class="flex">
                    <form th:action="@{/admin/exams/lock/{id}(id=${exam.id})}" method="post" th:if="${!exam.locked}">
                        <button type="submit" class="btn btn-lock">Lock</button>
                    </form>
                    <form th:action="@{/admin/exams/unlock/{id}(id=${exam.id})}" method="post" th:if="${exam.locked}">
                        <button type="submit" class="btn btn-unlock">Unlock</button>
                    </form>
                    
                    <a th:href="@{/admin/exams/export/excel/{id}(id=${exam.id})}" class="btn btn-export">Excel</a>
                    <a th:href="@{/admin/exams/export/pdf/{id}(id=${exam.id})}" class="btn btn-export">PDF</a>
                </div>
            </td>
        </tr>
        </tbody>
    </table>
</div>
</body>
</html>